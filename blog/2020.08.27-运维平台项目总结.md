# 技术细节

虽然每个功能点都知道要怎么做，但是做的过程中也会遇到很多细节问题，需要一个个去解决，下面罗列出来。

- 获取终端命令的某一行某一列的内容

使用 `awk` 提取某一列，使用 `sed` 命令提取某一行。
`awk` 能很方便的处理每行格式都相同的文本，比如 CSV，一些终端命令的输出。几乎所有的 linux 系统都支持，mac 也支持。

基本用法是：

```
# 打印 docker ps 命令的第一列
docker ps | awk -F " " '{print $1}'
```

`-F` 参数指定了分隔符，这里以空格为分隔符， `$1` 表示分隔出来的第一个元素。

`awk` 还有一些内置的函数和控制语句，不过目前用不到，先不做了解。

```
# 打印 docker ps 命令的第一行
docker ps | sed -n '1p'
```

`-n` 表示不输出所有内容，根据后面的 '' 里的条件输出，引号里面的 1 和 p ，`1` 表示第一行，`p` 表示输出。

那么结合一下 awk 和 sed 命令，就能获取到某一行某一列的值，例如获取第2行第3列的值：

```
docker ps | awk -F " " '{print $3}' | sed -n '2p'
```

比如用 kill 命令删除 3000 端口的进程：

```
kill -9 $(lsof -i:3000 | awk -F " " '{print $2}' | sed -n '2p')
```

但是 docker ps 命令的输出很多都不是格式化的，很多列里面的值也带有空格，导致使用 $ 取某列值的时候就不准，这时就要借助 --format 参数，定制输出的格式，如：

```
docker ps --format '{{.Names}}##{{.Status}}' | awk -F "##" '{print $2}'
```

意思是我们只取 name 和 status 的信息，输出的格式用 ## 隔开，然后用 awk 的 -F 参数就可以顺利的取到值。

- 在 node 中执行 shell 命令，并获取标准输出

exec 

- 使用 pkg 打包 node 应用，隐藏源码

执行 yarn add pkg 来安装 pkg 包。

然后


- 使用 submodule 集成前端项目


# 遇到的问题

mongodb 密码中有特殊字符的解决办法。

